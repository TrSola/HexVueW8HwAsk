import{q as T,g as p,o as U,r as _,a as r,c,e,F as E,k as A,t as i,b as a,w,x as f,l as R,v as $,d as j}from"./index-Hq070Y_W.js";import{a as V}from"./axios-L6U4YIEh.js";var q={VITE_APP_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_PATH:"aca101139",BASE_URL:"/HexVueW8HwAsk/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const N={class:"container"},S=e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-10"},[e("h3",{class:"fw-bold mb-4 pt-3"},"結帳頁面")])],-1),C={class:"row flex-row-reverse justify-content-center pb-5"},D={key:0,class:"col-md-4"},O={class:"border p-4 mb-4"},B=["src"],H={class:"w-100 mb-2"},L={class:"d-flex justify-content-between"},F={class:"mb-0 fw-bold"},M={class:"mb-0"},z={class:"mb-0 fw-bold"},W={class:"table mt-4 border-top border-bottom text-muted"},G=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),I={class:"text-end border-0 px-0 pt-4"},J=e("tr",null,[e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),e("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"面交")],-1),K={class:"d-flex justify-content-between mt-4"},Q=e("p",{class:"mb-0 h4 fw-bold"},"總計",-1),X={class:"mb-0 h4 fw-bold"},Y={key:1,class:"col-md-4"},Z=e("h2",null,"再去選購一些商品吧！",-1),ee=[Z],se={class:"col-md-6"},te={class:"mb-3"},le=e("label",{for:"email",class:"form-label"},"電子郵件",-1),ae={class:"mb-3"},oe=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),de={class:"mb-3"},ne=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),re={class:"mb-3"},ce=e("label",{for:"address",class:"form-label"},"收件人地址",-1),ie={class:"mb-3"},me=e("label",{for:"message",class:"form-label"},"留言",-1),ue={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},_e=e("i",{class:"fas fa-chevron-left me-2"},null,-1),be={__name:"checkOutView",setup(fe){const k=T(),n=p({}),{VITE_APP_URL:v,VITE_APP_PATH:b}=q,h=p(null),t=p({user:{name:"",email:"",tel:"",address:""},message:""}),x=()=>{if(n.value.carts.length===0)alert("購物車內沒有品項");else{const m=`${v}/api/${b}/order`,s=t.value;V.post(m,{data:s}).then(d=>{alert(d.data.message),h.value.resetForm(),g(),k.push("/checkOutSuccess")}).catch(d=>{alert(d.response.data.message)})}},g=()=>{const m=`${v}/api/${b}/cart`;V.get(m).then(s=>{n.value=s.data.data}).catch(s=>{alert(s.response.data.message)})};return U(()=>{g()}),(m,s)=>{const d=_("v-field"),u=_("error-message"),y=_("v-form"),P=_("router-link");return r(),c("div",N,[S,e("div",C,[n.value.carts&&n.value.carts.length!==0?(r(),c("div",D,[e("div",O,[(r(!0),c(E,null,A(n.value.carts,l=>(r(),c("div",{class:"d-flex mt-2",key:l.id},[e("img",{src:l.product.imageUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,B),e("div",H,[e("div",L,[e("p",F,i(l.product.title),1),e("p",M,"NT$"+i(l.product.price),1)]),e("p",z,"x"+i(l.qty),1)])]))),128)),e("table",W,[e("tbody",null,[e("tr",null,[G,e("td",I,"NT$"+i(n.value.final_total),1)]),J])]),e("div",K,[Q,e("p",X,"NT$"+i(n.value.final_total),1)])])])):(r(),c("div",Y,ee)),e("div",se,[a(y,{ref_key:"formRef",ref:h,onSubmit:x},{default:w(({errors:l})=>[e("div",te,[le,a(d,{id:"email",name:"email",type:"email",class:f(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.value.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value.user.email=o)},null,8,["class","modelValue"]),a(u,{name:"email",class:"invalid-feedback"})]),e("div",ae,[oe,a(d,{id:"name",name:"姓名",type:"text",class:f(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.value.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value.user.name=o)},null,8,["class","modelValue"]),a(u,{name:"姓名",class:"invalid-feedback"})]),e("div",de,[ne,a(d,{id:"tel",name:"電話",type:"text",class:f(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:t.value.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>t.value.user.tel=o)},null,8,["class","modelValue"]),a(u,{name:"電話",class:"invalid-feedback"})]),e("div",re,[ce,a(d,{id:"address",name:"地址",type:"text",class:f(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.value.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>t.value.user.address=o)},null,8,["class","modelValue"]),a(u,{name:"地址",class:"invalid-feedback"})]),e("div",ie,[me,R(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=o=>t.value.message=o)},null,512),[[$,t.value.message]])])]),_:1},512),e("div",ue,[a(P,{to:"/cart",class:"text-dark mt-md-0 mt-3"},{default:w(()=>[_e,j("回到購物車")]),_:1}),e("button",{type:"submit",class:"btn btn-danger",onClick:x},"送出訂單")])])])])}}};export{be as default};
